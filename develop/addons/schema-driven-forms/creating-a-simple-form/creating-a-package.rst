Creating a package
====================

**Giving our forms a home**

We start this tutorial by creating a package using *bobtemplates.plone* for `mr.bob <http://mrbob.readthedocs.io/en/latest/>`_.
For more details about this process,
see :doc:`Bootstrapping Plone add-on development </develop/addons/bobtemplates.plone/README>`.
Then we will add *plone.app.z3cform* as a dependency to the setup.py and register .
If you want to add a *z3cform* form to a package, that already exists,
you have to update the setup.py of this package.

.. note::

    There is an accompanying git repository collective.exampleform on GitHub where you always can see
    the full source code in context. Check out the README.rst of the repo to learn how to add the example
    to your buildout and try the form out.



First, we create a new package in src:

.. code-block:: bash

    $ ../bin/mrbob -O collective.exampleform bobtemplates:plone_addon

We create a package from the *Basic* template for Plone version *5.0-latest*.

We will add collective.exampleform later as development egg to our buildout.
But for now we use the autogenerated buildout of the package itself.

Take a look at buildout.cfg at the top level of our newly created package.
You will find there various useful things:

 * instance with your package added to the eggs
 * code analysis
 * a test runner
 * even a robot test runner
 * and a releaser

That is everything you need for development. So let us use this buildout.

.. code-block:: bash

    $ cd collective.exampleform/
    $ python bootstrap-buildout.py
    $ bin/buildout

Let us test it!

.. code-block:: bash

    $ bin/test -s collective.exampleform
    $ bin/test -s collective.exampleform -t test_example.robot --all

Our package shall add a form to our Plone site.
We use *plone.app.z3cform* to develop the form.
To use it we have to declare it as a dependency in install_requires in setup.py.

.. code-block:: py

    install_requires=[
        'plone.api',
        'setuptools',
        'z3c.jbot',
        'plone.app.z3cform',
    ],

We also add the import step of *plone.app.z3cform* to the profile's metadata.xml,
so that it will get installed automatically.

.. code-block:: xml

    <metadata>
        <version>1000</version>
        <dependencies>
            <dependency>profile-plone.app.z3cform:default</dependency>
        </dependencies>
    </metadata>

We have omitted large parts of the buildout configuration in the text.
You can look up the full code on github.
In this section we:

-  created a plone 5 add-on using mr.bob.
-  tested the egg in a Plone test environment using the autogenerated buildout.cfg of our package.
-  added *plone.app.z3cform* as dependencies to the egg.
